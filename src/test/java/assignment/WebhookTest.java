package assignment;

import org.junit.Test;
import org.junit.Assert;

public class WebhookTest {
    @Test
    public void testHash() {
        Assert.assertEquals(Webhook.hash(testJson.getBytes()),
                            "8a6ed5d51d5a5614e69eda32fc78122eff46518307e3ad4e40a4de53ca68b177");
    }

    static final String testJson =
        "{\"zen\":\"Approachable is better than simple.\",\"hook_id\":400241886,\"hook\":{\"type\":\"Repository\",\"id\":400241886,\"name\":\"web\",\"active\":true,\"events\":[\"push\"],\"config\":{\"content_type\":\"json\",\"insecure_ssl\":\"0\",\"secret\":\"********\",\"url\":\"https://ci.versov.pro/\"},\"updated_at\":\"2023-02-08T17:43:42Z\",\"created_at\":\"2023-02-08T17:43:42Z\",\"url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/hooks/400241886\",\"test_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/hooks/400241886/test\",\"ping_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/hooks/400241886/pings\",\"deliveries_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/hooks/400241886/deliveries\",\"last_response\":{\"code\":null,\"status\":\"unused\",\"message\":null}},\"repository\":{\"id\":595701116,\"node_id\":\"R_kgDOI4GtfA\",\"name\":\"Assignment-2\",\"full_name\":\"DD2480-group14/Assignment-2\",\"private\":false,\"owner\":{\"login\":\"DD2480-group14\",\"id\":123554458,\"node_id\":\"O_kgDOB11Kmg\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/123554458?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/DD2480-group14\",\"html_url\":\"https://github.com/DD2480-group14\",\"followers_url\":\"https://api.github.com/users/DD2480-group14/followers\",\"following_url\":\"https://api.github.com/users/DD2480-group14/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/DD2480-group14/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/DD2480-group14/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/DD2480-group14/subscriptions\",\"organizations_url\":\"https://api.github.com/users/DD2480-group14/orgs\",\"repos_url\":\"https://api.github.com/users/DD2480-group14/repos\",\"events_url\":\"https://api.github.com/users/DD2480-group14/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/DD2480-group14/received_events\",\"type\":\"Organization\",\"site_admin\":false},\"html_url\":\"https://github.com/DD2480-group14/Assignment-2\",\"description\":\"Warning: This is a university project of no use.\",\"fork\":false,\"url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2\",\"forks_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/forks\",\"keys_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/keys{/key_id}\",\"collaborators_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/collaborators{/collaborator}\",\"teams_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/teams\",\"hooks_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/hooks\",\"issue_events_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/issues/events{/number}\",\"events_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/events\",\"assignees_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/assignees{/user}\",\"branches_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/branches{/branch}\",\"tags_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/tags\",\"blobs_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/git/blobs{/sha}\",\"git_tags_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/git/tags{/sha}\",\"git_refs_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/git/refs{/sha}\",\"trees_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/git/trees{/sha}\",\"statuses_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/statuses/{sha}\",\"languages_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/languages\",\"stargazers_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/stargazers\",\"contributors_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/contributors\",\"subscribers_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/subscribers\",\"subscription_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/subscription\",\"commits_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/commits{/sha}\",\"git_commits_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/git/commits{/sha}\",\"comments_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/comments{/number}\",\"issue_comment_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/issues/comments{/number}\",\"contents_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/contents/{+path}\",\"compare_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/compare/{base}...{head}\",\"merges_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/merges\",\"archive_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/{archive_format}{/ref}\",\"downloads_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/downloads\",\"issues_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/issues{/number}\",\"pulls_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/pulls{/number}\",\"milestones_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/milestones{/number}\",\"notifications_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/notifications{?since,all,participating}\",\"labels_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/labels{/name}\",\"releases_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/releases{/id}\",\"deployments_url\":\"https://api.github.com/repos/DD2480-group14/Assignment-2/deployments\",\"created_at\":\"2023-01-31T16:26:15Z\",\"updated_at\":\"2023-02-03T14:06:54Z\",\"pushed_at\":\"2023-02-08T17:02:23Z\",\"git_url\":\"git://github.com/DD2480-group14/Assignment-2.git\",\"ssh_url\":\"git@github.com:DD2480-group14/Assignment-2.git\",\"clone_url\":\"https://github.com/DD2480-group14/Assignment-2.git\",\"svn_url\":\"https://github.com/DD2480-group14/Assignment-2\",\"homepage\":null,\"size\":35,\"stargazers_count\":0,\"watchers_count\":0,\"language\":\"Java\",\"has_issues\":true,\"has_projects\":false,\"has_downloads\":true,\"has_wiki\":false,\"has_pages\":true,\"has_discussions\":false,\"forks_count\":0,\"mirror_url\":null,\"archived\":false,\"disabled\":false,\"open_issues_count\":6,\"license\":null,\"allow_forking\":true,\"is_template\":false,\"web_commit_signoff_required\":false,\"topics\":[],\"visibility\":\"public\",\"forks\":0,\"open_issues\":6,\"watchers\":0,\"default_branch\":\"main\"},\"sender\":{\"login\":\"aversey\",\"id\":6965788,\"node_id\":\"MDQ6VXNlcjY5NjU3ODg=\",\"avatar_url\":\"https://avatars.githubusercontent.com/u/6965788?v=4\",\"gravatar_id\":\"\",\"url\":\"https://api.github.com/users/aversey\",\"html_url\":\"https://github.com/aversey\",\"followers_url\":\"https://api.github.com/users/aversey/followers\",\"following_url\":\"https://api.github.com/users/aversey/following{/other_user}\",\"gists_url\":\"https://api.github.com/users/aversey/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/aversey/starred{/owner}{/repo}\",\"subscriptions_url\":\"https://api.github.com/users/aversey/subscriptions\",\"organizations_url\":\"https://api.github.com/users/aversey/orgs\",\"repos_url\":\"https://api.github.com/users/aversey/repos\",\"events_url\":\"https://api.github.com/users/aversey/events{/privacy}\",\"received_events_url\":\"https://api.github.com/users/aversey/received_events\",\"type\":\"User\",\"site_admin\":false}}";
}
